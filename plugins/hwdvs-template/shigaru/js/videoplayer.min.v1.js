jQuery(document).ready(function(){function d(){var e=jQuery("#infocontext #morerelated i");var a=e.attr("class");e.removeClass().addClass("icon-spinner icon-spin");jQuery.ajax({url:k+"&lstart="+g,context:document.body,success:function(m){var i=jQuery("#infocontext ul#relatedvideos");i.append(m);i.find("li").fadeIn();i.find("a[title]").qtip({position:{show:{delay:2000},my:"top center",at:"bottom center",adjust:{x:0,y:25},target:"mouse"}});jQuery(".loadingcontent").hide();e.removeClass().addClass(a)}})}function b(i){var a=jQuery(i.target);var m=a.attr("href");a.parent().parent().siblings(".icon-spinner").show();jQuery.ajax({url:m,cache:false,complete:function(n){a.parent().parent().siblings(".icon-spinner").hide();a.parent().parent().parent().html(n.responseText);jQuery("ul.rating li a").click(function(o){o.preventDefault();b(o)})}})}function f(q){var m=jQuery(q.target);var u=m.attr("id");u=u.substring(2);var p="index.php?option=com_hwdvideoshare&lang=en&task=ajax_manageplaylistitems&format=raw&item_id="+jQuery("input#videoid").val()+"&public_private=private&playlist_id="+u;var a=m.find("i:first");var o=a[0].className;m.attr("disabled",true);a.removeClass();a.addClass("icon-spinner icon-spin");jQuery.ajax({url:p}).done(function(i){c(i,m,o)})}function l(p,m,q){var o=parseInt(p);var a=m.find("i");m.attr("disabled",false);a.removeClass();a.addClass(q);if(!isNaN(o)){switch(o){case 0:m.next().find("li").html("There was an error processing your request please try again later.");m.parent().addClass("open");break;case 1:break;default:break}}else{m.next().find("li .reponsesay").html(p);m.parent().addClass("open")}}function c(p,m,q){var o=parseInt(p);var a=m.find("i");m.attr("disabled",false);if(m.attr("id").indexOf("ll")==-1){a.removeClass();a.addClass(q)}if(!isNaN(o)){switch(o){case 0:m.next().find("li").html("There was an error processing your request please try again later.");m.parent().addClass("open");break;case 1:if(m.attr("id").indexOf("ll")==-1){a.removeClass("fontgreen");a.removeClass("fontred");m.removeClass("clicked");m.removeClass("active");if(m.attr("id").indexOf("flag")==-1){j(m,m.attr("id"))}}else{m.find("i:first").removeClass().addClass("icon-check-empty fontgreen")}break;default:if(m.attr("id").indexOf("ll")==-1){if(m.attr("id").indexOf("flag")==-1){a.addClass("fontgreen")}else{a.addClass("fontred")}m.addClass("clicked");m.addClass("active");a.attr("clicked","likeid"+o);if(m.attr("id").indexOf("flag")==-1){j(m,m.attr("id"))}}else{m.find("i:first").removeClass().addClass("icon-check fontgreen")}break}}else{m.next().find("li .reponsesay").html(p);m.parent().addClass("open")}}function j(i,a){var m="index.php?option=com_hwdvideoshare&lang=en&task=ajax_getactioncount&format=raw&action="+a+"&item_id="+jQuery("input#videoid").val();jQuery.ajax({url:m}).done(function(e){var o=i.parents("div.fleft.mright6").find(".timesactioned span");o.hide().html(e).fadeIn()})}function h(p){var m="";var q=jQuery(p);var o=jQuery(p).find("i");var a=jQuery("input#videoid").val();if(q.hasClass("active")){if(!q.hasClass("clicked")){m="&likeid="+o.attr("id")}else{m="&likeid="+o.attr("clicked")}}return"index.php?option=com_hwdvideoshare&lang=en&task=ajax_like&format=raw"+m+"&item_id="+a+"&item_type=video"}var g=0;var k="index.php?option=com_hwdvideoshare&task=ajax_relatedvideos&format=raw&item_id="+jQuery("input#videoid").val()+"&lang="+jQuery("input#lang").val();d();g+=10;jQuery("#infocontext #morerelated").click(function(a){a.preventDefault();g+=10;d();if(g>100){jQuery(this).hide()}});jQuery("#btncomments").click(function(i){i.preventDefault();var a=jQuery("#comments-form-comment").focus().position();jQuery("html, body").animate({scrollTop:a.top+150},"slow")});if(jQuery("#truncateMe").height()<jQuery("#videodecription").height()){jQuery("#truncateMe").next().show()}if(jQuery("#tagwrap").height()<jQuery("#tagwrap span").height()){jQuery("#tagwrap").next().show()}jQuery("#showmoredesc,#showmoretags").click(function(m){m.preventDefault();var a=jQuery(this).find("i");var o=jQuery(this);if(a.hasClass("icon-double-angle-up")){a.removeClass("icon-double-angle-up");a.addClass("icon-double-angle-down");o.parent().prev().removeAttr("style");var i=o.parent().prev().position();jQuery("html, body").animate({scrollTop:i.top},"slow")}else{a.removeClass("icon-double-angle-down");a.addClass("icon-double-angle-up");o.parent().prev().animate({height:o.parent().prev().find("span:first").height()})}});jQuery("ul.rating li a").click(function(a){a.preventDefault();b(a)});jQuery("#tuner").click(function(a){a.preventDefault();jQuery.blockUI({message:'<p class="shigarunotice"><span id="close"></span><iframe class="mtop20" src="http://www.123guitartuner.com/guitar_tuner.swf" width="550" height="350"></iframe><br />created by <a href="http://www.123guitartuner.com/">Guitar Tuner</a></p>',css:{top:(jQuery(window).height()-400)/2+"px",left:(jQuery(window).width()-600)/2+"px",height:"400px",width:"600px","overflow-y:":"auto"}});jQuery(".shigarunotice #close").click(function(){jQuery.unblockUI()})});jQuery(".crossclose").click(function(a){a.preventDefault();jQuery(this).parents(".btn-group").removeClass("open")});jQuery(".videoactions button.btn").click(function(a){});jQuery("#add2plbutton").click(function(i){var a=jQuery(this);a.next().fadeToggle();a.parents(".btn-group").toggleClass("open");i.preventDefault();i.stopPropagation()});jQuery("#learnlaterbutton").click(function(p){p.preventDefault();if(jQuery(this).next().find("li span.pad6").length>0){jQuery(this).parents(".btn-group").toggleClass("open")}else{var m="index.php?option=com_hwdvideoshare&lang=en&task=ajax_manageplaylistitems&format=raw&item_id="+jQuery("input#videoid").val()+"&public_private=private&playlist_id=learnlater";var q=jQuery(this);var o=jQuery(this).find("i");var a=o[0].className;q.attr("disabled",true);o.removeClass();o.addClass("icon-spinner icon-spin");jQuery.ajax({url:m}).done(function(i){c(i,q,a)})}});jQuery("#add2plbutton").next().find("li a").click(function(a){a.preventDefault();f(a)});jQuery("#addplbutton").click(function(q){q.preventDefault();var m=jQuery("#playlist_name").val();if(m.length>2){var u="index.php?option=com_hwdvideoshare&lang=en&task=ajax_manageplaylistitems&format=raw&playlist_name="+m+"&item_id="+jQuery("input#videoid").val()+"&public_private="+jQuery("#public_private").val();var p=jQuery(this);var a=jQuery(this).find("i");var s=a[0].className;p.attr("disabled",true);a.removeClass();a.addClass("icon-spinner icon-spin");jQuery.ajax({url:u}).done(function(i){var o=jQuery("#public_private").val()=="public"?"icon-unlock":"icon-lock";l(i,p,s);jQuery("#add2plbutton").next().prepend('<li class="justadded" style="display:none;"><a id="ll'+i+'" href="#"><i class="icon-check fontgreen"></i> <i class="'+o+'"></i> <i class="icon-list-ol"></i> <span>'+m+"</span></a></li>");jQuery("#add2plbutton").next().find(".justadded").fadeIn("slow").removeClass("justadded");jQuery("#playlist_name").val("");jQuery("#add2plbutton").next().find(".crossclose").parent().fadeOut().remove();jQuery("#add2plbutton").next().find("li a").click(function(n){n.preventDefault()})})}else{if(jQuery("#add2plbutton").next().find(".crossclose").length==0){jQuery("#add2plbutton").next().prepend('<li class="mleft12 borbotgrey mbot6"><a class="crossclose fright" title="Click on this icon to close this message"><i class="icon-remove"></i></a><div class="reponsesay clear mbot6">Please enter at least 3 letters for the new playlist name field</div></li>');jQuery("#add2plbutton").next().find(".crossclose").click(function(){jQuery(this).parent().fadeOut().remove()})}else{jQuery("#add2plbutton").next().find(".crossclose").parent().fadeIn("slow")}}});jQuery("#hwdvidsflagged_videos").click(function(p){p.preventDefault();var m="index.php?option=com_hwdvideoshare&lang=en&task=ajax_reportvideo&format=raw&item_id="+jQuery("input#videoid").val();var q=jQuery(this);var o=jQuery(this).find("i");var a=o[0].className;q.attr("disabled",true);o.removeClass();o.addClass("icon-spinner icon-spin");jQuery.ajax({url:m}).done(function(i){c(i,q,a)})});jQuery("#hwdvidsfavorites").click(function(p){p.preventDefault();var m="index.php?option=com_hwdvideoshare&lang=en&task=ajax_addtofavourites&format=raw&item_id="+jQuery("input#videoid").val();var q=jQuery(this);var o=jQuery(this).find("i");var a=o[0].className;q.attr("disabled",true);o.removeClass();o.addClass("icon-spinner icon-spin");jQuery.ajax({url:m}).done(function(i){c(i,q,a)})});jQuery("#hwdvidslikes").click(function(p){p.preventDefault();var m=h(this);var q=jQuery(this);var o=jQuery(this).find("i");var a=o[0].className;o.removeClass();o.addClass("icon-spinner icon-spin");q.attr("disabled",true);jQuery.ajax({url:m}).done(function(i){c(i,q,a)})})});