function shigaruAjax(e,t,n,r,i){var s='<div class="loadingMessage">Processing</div>';var o={"background-image":'url("/shigaru/templates/rhuk_milkyway/images/loading.gif")',border:"none",backgroundColor:"transparent","background-repeat":"no-repeat"};var u=true;if(r!=null)s=r;if(n!=null)o=n;if(i!=null)u=i;jQuery(t).block({message:s,showOverlay:u,css:o});jQuery.ajax({url:e,context:document.body,success:function(e){jQuery(t).unblock();shigaruMessages(e)}})}function shigaruMessages(e){jQuery.blockUI({message:e,fadeIn:700,fadeOut:700,timeout:5e3,showOverlay:false,centerY:false,css:{width:"350px",top:"40px",left:"25%",border:"none",padding:"5px",position:"fixed",backgroundColor:"#000","border-radius":"10px","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.85,color:"#fff"}})}var $jq=jQuery.noConflict();jQuery(document).ready(function(e){if(jQuery("#the_most .tab_wrapper").length>0){jQuery("#the_most_title").shigaruTabs({slidesWrapper:"#the_most_wrapper",effect:"fade"});jQuery(".leftcolumn .video_activity_header").shigaruTabs({slidesWrapper:".leftcolumn .slidesWrapper"});jQuery(".rightcolumn .video_activity_header").shigaruTabs({slidesWrapper:".rightcolumn .slidesWrapper"});jQuery(".workarea_odd .video_activity .video_activity_header").shigaruTabs({slidesWrapper:".workarea_odd .video_activity .slidesWrapper"})}jQuery.ajax({url:"index.php?option=com_hwdvideoshare&lang=en&task=ajax_showtabs&format=raw&listtype=being"}).done(function(e){jQuery("#beingwatched .content_box h3").after(e);jQuery("#beingwatched .content_box .slidesWrapper li a").qtip({position:{show:{delay:2e3},my:"top center",at:"bottom center",adjust:{x:0,y:25},target:"mouse"}});jQuery(".beingwatched_header").shigaruTabs({slidesWrapper:"#beingwatched .slidesWrapper",controls:true,hideTabs:true,directionOfSorting:"left"})});jQuery("#roksearch_search_str").liveSearch({url:"index.php?option=com_hwdvideoshare&task=displayresults&limit=6&format=raw&fromtop=1&ajax=yes&pattern="});jQuery(".usermessages div a.close").click(function(){jQuery.unblockUI();jQuery(this).parent().parent().fadeOut()});jQuery(".shigaruinfo a.close").click(function(){jQuery.unblockUI();jQuery(this).parent().fadeOut()});jQuery("#grettings").click(function(e){var t=jQuery(this);t.toggleClass("userzoneopen");t.find("ul.dropdown-menu").toggle();e.stopPropagation()});jQuery("body").click(function(){jQuery("#topnavmenu ul.dropdown-menu").hide();if(jQuery("#grettings").hasClass("userzoneopen"))jQuery("#grettings").removeClass("userzoneopen")});jQuery("#login a.dropper,#lang a.dropper").click(function(e){e.preventDefault();if(!jQuery(this).parent(".topbuttons").hasClass("menu-open")){jQuery(".menu-open .floatingBox").hide();jQuery(".menu-open").removeClass("menu-open")}jQuery(e.target).parent("a").siblings(".floatingBox").toggle();jQuery(e.target).parent("a").parent(".topbuttons").toggleClass("menu-open")});jQuery(".topbuttons").mouseup(function(){});jQuery(document).mouseup(function(e){if(jQuery(e.target).parent("a").parent(".topbuttons").length==0){jQuery(e.target).parent("a").parent(".topbuttons").removeClass("menu-open");jQuery(e.target).parent("a").siblings(".floatingBox").hide()}});jQuery(".workarea a[title]").qtip({position:{show:{delay:2e3},my:"top center",at:"bottom center",adjust:{x:0,y:25},target:"mouse"}})});(function(e){e.fn.shigaruToolTip=function(t){function n(t){var n=21;var r=e(t);var i=100;var s=e("#communitytooltip");var o;r.hover(function(t){s.html(r.find(".pe-description").clone().show());if(r.offset().left+220>e(window).width()-200)s.css("left",r.offset().left-i-(200-i));else s.css("left",r.offset().left+i);s.css({"z-index":1e4,top:r.offset().top+n}).fadeIn()},function(){s.hide().css("z-index",9999)})}return this.each(function(){n(this)})}})(jQuery);(function(e){e.fn.shigaruTabs=function(t){function h(t){t.each(function(t,n){var r=e(n);if(r.hasClass("date"))r.click(d);else if(r.hasClass("tabreload"))r.click(p)})}function p(t){var n=e(r.parent("li.selected").children("a").attr("href"));e(t.target).addClass("active").find(".icon-repeat").removeClass("icon-repeat").addClass("active icon-refresh icon-spin");if(n.hasClass("loadedondemand")){n.removeClass("loadedondemand")}v(n);t.preventDefault()}function d(t){var n=e(r.parent("li.selected").children("a").attr("href"));n.find(".tabmodcontrols a.active").removeClass("active");e(t.target).addClass("active");if(n.hasClass("loadedondemand")){n.removeClass("loadedondemand")}v(n);t.preventDefault()}function v(t){var n;var r=t.find(".tabscroller").children().eq(0).hasClass("jspContainer");if(!r)n=t.find(".tabscroller").children().eq(0);else n=t.find(".tabscroller").find(".jspPane").children().eq(0);if(!t.hasClass("loadedondemand")){n.hide();var i="";if(t.find(".tabmodcontrols a.active").attr("href")){var s=t.find(".tabmodcontrols a.active").attr("href");i="&when="+s.substring(1)}oUrl="index.php?option=com_hwdvideoshare&lang=en&task=ajax_showtabs&format=raw&showtab="+n.attr("id")+"&listtype="+n.attr("class")+i;if(!r){t.addClass("loadedondemand").find(".tabscroller").css("overflow-y","hidden");n.parent().append('<div class="loadingcontent" style="line-height:'+t.find(".tabscroller").height()+'px"><i class="icon-spinner icon-spin"></i> Loading...</div>')}else{t.find(".tabscroller").find(".jspPane").children().eq(0).hide();t.addClass("loadedondemand").find(".tabscroller .jspContainer .jspVerticalBar").hide();t.find(".loadingcontent").show()}e.ajax({url:oUrl}).done(function(e){t.find(".loadingcontent").hide();if(!t.find(".tabscroller").children().eq(0).hasClass("jspContainer")){t.find(".tabscroller").children().eq(0).html(e).fadeIn("slow",function(){t.find("a[title]").qtip({position:{show:{delay:2e3},my:"top center",at:"bottom center",adjust:{x:0,y:25},target:"mouse"}});if(t.hasClass("community"))t.find("ul.pe-thumbs li").shigaruToolTip()});t.find(".tabscroller").jScrollPane({showArrows:true})}else{t.addClass("loadedondemand").find(".tabscroller .jspContainer .jspVerticalBar").show();t.find(".tabscroller").find(".jspPane").children().eq(0).html(e).fadeIn("slow",function(){t.find("a[title]").qtip({position:{show:{delay:2e3},my:"top center",at:"bottom center",adjust:{x:0,y:25},target:"mouse"}});if(t.hasClass("community"))t.find("ul.pe-thumbs li").shigaruToolTip()})}t.find(".tabmodcontrols a.tabreload").removeClass("active").find(".icon-refresh").removeClass("icon-refresh icon-spin").addClass("icon-repeat")})}}function m(t){var n=e(t.target);if(n.parent().hasClass("selected"))n=n.parent();n=e(n.attr("href"));v(n)}function g(t){f=e(this).attr("href");b(f);e(i).each(function(t,r){if(t!=c){e(r).find("ul li a.thumbplay").css("display","none");e(r).find("ul li a .categoryinfothumb").css("display","none")}else{e(n.slidesWrapper+" .slideInner").animate({marginLeft:-(c*o)},function(){e(r).find("ul li a.thumbplay").css("display","block");e(r).find("ul li a .categoryinfothumb").css("display","block")})}});t.preventDefault(f)}function y(t){f=e(this).attr("href");b(f);e(l.attr("href")).fadeOut(200,function(){e(a.attr("href")).fadeIn("slow")});t.preventDefault()}function b(t){r.each(function(n,r){if(e(r).parent().hasClass("selected")){l=e(r);e(r).parent().removeClass("selected")}if(e(r).attr("href")==t){c=n;a=e(r);e(r).parent().addClass("selected")}})}var n=e.extend({},e.fn.shigaruTabs.defaults,t);var r=e(this).find("ul li a");var i=e(n.slidesWrapper+" "+n.slidesSelector);var s=i.find("div.tabmodcontrols .btn");var o=i[0].offsetWidth;var u=i.length;var a,f,l=null;var c=0;return this.each(function(){switch(n.effect){case"rotate":e(i).each(function(t,n){var i=e(n);if(t!=0){i.find("ul li a.thumbplay").css("display","none");i.find("ul li a .categoryinfothumb").css("display","none")}if(i.hasClass("ajaxload"))v(i);if(i.hasClass("loadondemand"))e(r[t]).click(m);if(i.hasClass("loaded"))i.find(".tabscroller").jScrollPane({showArrows:true})});e(n.slidesWrapper).css("overflow","hidden");i.wrapAll('<div class="slideInner"></div>').css({"float":n.directionOfSorting,width:o});e(n.slidesWrapper+" .slideInner").css("width",o*u);r.click(g);break;case"fade":i.each(function(t,n){if(t>0)e(this).fadeOut();if(e(this).hasClass("ajaxload"))v(e(this));if(e(this).hasClass("loadondemand"))e(r[t]).click(m);if(e(this).hasClass("loaded"))e(this).find(".tabscroller").jScrollPane({showArrows:true})});r.click(y);break}if(s.length>0)h(s)})};e.fn.shigaruTabs.defaults={slidesSelector:".tab_wrapper",slidesWrapper:"#slidesWrapper",directionOfSorting:"left",effect:"rotate",controls:false,hideTabs:false}})(jQuery);(function(e){e.fn.shigaruSearch=function(t){function u(){e(n.orderLinks).removeClass("orderselected");e("#"+oSearchParams.ordering).addClass("orderselected");e(n.orderLinks).click(function(t){e(n.orderLinks).removeClass("orderselected");e(t.target).addClass("orderselected");y(h(t));t.preventDefault()})}function a(){e("#limit option[value='0']").remove();e("#limit").change(function(e){y(h(e));e.preventDefault()})}function f(){e(n.paginationLinks).click(function(e){y(h(e));e.preventDefault()})}function l(){e(n.searchTypeLinks).click(function(t){e(n.searchTypeLinks).parent().removeClass("styledCheckboxChecked");e(t.target).parent().addClass("styledCheckboxChecked");y(h(t));e("#resultfilters .filter").hide();e("#resultfilters ."+t.target.id).show()})}function c(){e(n.filtersLinks).click(function(t){if(!e(t.target).is("input")){if(e(t.target).siblings().is(":checked")||e(t.target).parent().siblings().is(":checked")){e(t.target).siblings().attr("checked",false);e(t.target).parent().siblings().attr("checked",false)}else{e(t.target).siblings().attr("checked","checked");e(t.target).parent().siblings().attr("checked","checked")}t.preventDefault()}y(h(t))});e(n.filtersSelects).change(function(e){y(h(e))})}function h(t){if(oSearchParams.currentUrl.indexOf("?")>0&&oSearchParams.currentUrl.indexOf("search-results")>0)r=oSearchParams.currentUrl.substring(0,oSearchParams.currentUrl.indexOf("?"))+"?ajax=yes";else if(oSearchParams.currentUrl.indexOf("search-results")<0)r=oSearchParams.currentUrl.substring(0,oSearchParams.currentUrl.indexOf("?"))+"/videos/search-results?ajax=yes";else r=oSearchParams.currentUrl+"?ajax=yes";if(e(t.target).parent().parent().hasClass("videopagination")||e(t.target).parent().parent().hasClass("pagination")){var n=t.target.href.substring(t.target.href.indexOf("&limitstart=")+12,t.target.href.length);if(n.indexOf("&")>0)n=n.substring(0,n.indexOf("&"));r+="&limitstart="+n}r+=m();r+=g(t);r+=p(t);r+=d(t);return r}function p(t){var n=e("#resultordering #limit").length>0?"&limit="+e("#resultordering #limit").val():"";return n}function d(t){var n=e("#searchinput").val()!=""?"&pattern="+e("#searchinput").val()+"&ep=&ex=&rpp=0":"";return n}function v(e){}function m(){var t="";e("#resultfilters .filter:visible").each(function(){if(e(this).hasClass("filtercheck")){var n=e(this).find("input:checked");if(n.length>0)t+="&"+e(this).attr("id")+"=";e(n).each(function(r){if(e(this).val()!=""){if(r==n.length-1)t+=e(this).val();else t+=e(this).val()+","}})}else{var n=e(this).find("select");if(n.length>0)t+="&"+e(this).attr("id")+"=";e(n).each(function(n){if(e(this).val())t+=e(this).val()})}});return t}function g(t){var n="&sort="+e("#resultordering .orderselected").attr("id");return n}function y(t){e.blockUI({message:e('<div class="searchloading">Loading...</div>'),css:{border:"none",height:"auto","text-align":"left",cursor:"auto"}});e.ajax({url:t,context:document.body,success:function(t){e(n.targetDiv).html(t);f();u();a();e.unblockUI({onUnblock:function(){}});r=r.replace("&ajax=yes","");if(r.indexOf("?ajax=yes&")>0){r=r.replace("?ajax=yes&","?")}r=r.replace("#","");if(window.history.pushState)window.history.pushState({html:t,pageTitle:document.title},"",r);else window.location.href=r;var i=e(n.targetDiv).position();e("html, body").animate({scrollTop:i.top+150},"slow")}})}var n=e.extend({},e.fn.shigaruSearch.defaults,t);var r,i,s=null;var o=0;return this.each(function(){f();u();c();a();l()})};e.fn.shigaruSearch.defaults={paginationLinks:".searchwrapper .pagination a",targetDiv:"#resultwrapper",orderLinks:"#resultordering a",sortDefault:"relevance",searchTypeLinks:".search-results-filter-categories p label",filtersLinks:"#resultfilters .filter .widget input,#resultfilters .filter .widget a",filtersSelects:"#resultfilters .filter .widget select",hideTabs:false}})(jQuery);JQTWEET={user:"shigaru",numTweets:5,appendTo:"#shgtweets",loadTweets:function(){jQuery.ajax({url:"http://api.twitter.com/1/statuses/user_timeline.json/",type:"GET",dataType:"jsonp",data:{screen_name:JQTWEET.user,include_rts:true,count:JQTWEET.numTweets,include_entities:true},success:function(e,t,n){var r="<li>"+"<p><span>@USER</span>TWEET_TEXT</p>"+'<span class="tItalic">AGO</span>'+"</li>";for(var i=0;i<2;i++){jQuery(JQTWEET.appendTo).append(r.replace("TWEET_TEXT",JQTWEET.ify.clean(e[i].text)).replace("USER",e[i].user.screen_name).replace("AGO",JQTWEET.timeAgo(e[i].created_at)))}}})},timeAgo:function(e){var t=new Date;var n=new Date(e);if(jQuery.browser.msie){n=Date.parse(e.replace(/( \+)/," UTC$1"))}var r=t-n;var i=1e3,s=i*60,o=s*60,u=o*24,a=u*7;if(isNaN(r)||r<0){return""}if(r<i*2){return"right now"}if(r<s){return Math.floor(r/i)+" seconds ago"}if(r<s*2){return"about 1 minute ago"}if(r<o){return Math.floor(r/s)+" minutes ago"}if(r<o*2){return"about 1 hour ago"}if(r<u){return Math.floor(r/o)+" hours ago"}if(r>u&&r<u*2){return"yesterday"}if(r<u*365){return Math.floor(r/u)+" days ago"}else{return"over a year ago"}},ify:{link:function(e){return e.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(e,t,n,r,i){var s=n.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+s+t+'">'+(t.length>25?t.substr(0,24)+"...":t)+"</a>"+i})},at:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g,function(e,t){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+t+'">@'+t+"</a>"})},list:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(e,t){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+t+'">@'+t+"</a>"})},hash:function(e){return e.replace(/(^|\s+)#(\w+)/gi,function(e,t,n){return t+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+n+'">#'+n+"</a>"})},clean:function(e){return this.hash(this.at(this.list(this.link(e))))}}};jQuery(document).ready(function(){JQTWEET.loadTweets()})
